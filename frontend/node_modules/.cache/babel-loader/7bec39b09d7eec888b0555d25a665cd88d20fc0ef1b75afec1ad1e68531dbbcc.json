{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ramak\\\\Desktop\\\\luct-report (1)\\\\luct-report\\\\luct-reporting-app\\\\frontend\\\\src\\\\components\\\\pl\\\\Rating.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Rating = () => {\n  _s();\n  const [reports, setReports] = useState([]);\n  const [ratings, setRatings] = useState({});\n  const [searchQuery, setSearchQuery] = useState('');\n  const [newRating, setNewRating] = useState({}); // Create a new state for new rating\n  const token = localStorage.getItem('token');\n  const headers = {\n    Authorization: `Bearer ${token}`\n  };\n  useEffect(() => {\n    axios.get('/api/reports', {\n      headers\n    }).then(res => setReports(res.data)).catch(err => alert('Failed to fetch reports'));\n  }, []);\n  const handleRatingChange = (reportId, field, value) => {\n    setRatings(prev => ({\n      ...prev,\n      [reportId]: {\n        ...prev[reportId],\n        [field]: value\n      }\n    }));\n  };\n  const handleSubmitRating = reportId => {\n    axios.post('/api/reports/rating', {\n      reportId,\n      rating: newRating\n    }, {\n      headers\n    }).then(() => {\n      setRatings(prev => {\n        const newRatings = {\n          ...prev\n        };\n        delete newRatings[reportId];\n        return newRatings;\n      });\n      setNewRating({}); // Clear input fields\n    }).catch(err => alert('Failed to submit rating'));\n  };\n  const handleInputChange = e => {\n    const {\n      id,\n      value\n    } = e.target;\n    setNewRating(prev => ({\n      ...prev,\n      [id]: value\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Reports\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Search\",\n      value: searchQuery,\n      onChange: e => setSearchQuery(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), reports.filter(report => report.name.toLowerCase().includes(searchQuery.toLowerCase())).map(report => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: report.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), Object.keys(newRating).map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: field,\n          value: newRating[field],\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleRatingChange(report.id, field, newRating[field]),\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleSubmitRating(report.id),\n          children: \"Save rating for report\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this)]\n      }, field, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this))]\n    }, report.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(Rating, \"ENx375VAiLOdQUPdGSKDQBpydk4=\");\n_c = Rating;\nexport default Rating;\nvar _c;\n$RefreshReg$(_c, \"Rating\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","Rating","_s","reports","setReports","ratings","setRatings","searchQuery","setSearchQuery","newRating","setNewRating","token","localStorage","getItem","headers","Authorization","get","then","res","data","catch","err","alert","handleRatingChange","reportId","field","value","prev","handleSubmitRating","post","rating","newRatings","handleInputChange","e","id","target","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","filter","report","name","toLowerCase","includes","map","Object","keys","onClick","_c","$RefreshReg$"],"sources":["C:/Users/ramak/Desktop/luct-report (1)/luct-report/luct-reporting-app/frontend/src/components/pl/Rating.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nconst Rating = () => {\r\n  const [reports, setReports] = useState([]);\r\n  const [ratings, setRatings] = useState({});\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [newRating, setNewRating] = useState({}); // Create a new state for new rating\r\n  const token = localStorage.getItem('token');\r\n  const headers = { Authorization: `Bearer ${token}` };\r\n\r\n  useEffect(() => {\r\n    axios.get('/api/reports', { headers })\r\n     .then(res => setReports(res.data))\r\n     .catch(err => alert('Failed to fetch reports'));\r\n  }, []);\r\n\r\n  const handleRatingChange = (reportId, field, value) => {\r\n    setRatings(prev => ({\r\n     ...prev,\r\n      [reportId]: {\r\n       ...prev[reportId],\r\n        [field]: value\r\n      }\r\n    }));\r\n  };\r\n\r\n  const handleSubmitRating = (reportId) => {\r\n    axios.post('/api/reports/rating', { reportId, rating: newRating }, { headers })\r\n     .then(() => {\r\n        setRatings(prev => {\r\n          const newRatings = {...prev };\r\n          delete newRatings[reportId];\r\n          return newRatings;\r\n        });\r\n        setNewRating({}); // Clear input fields\r\n      })\r\n     .catch(err => alert('Failed to submit rating'));\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { id, value } = e.target;\r\n    setNewRating(prev => ({...prev, [id]: value }));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Reports</h1>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Search\"\r\n        value={searchQuery}\r\n        onChange={(e) => setSearchQuery(e.target.value)}\r\n      />\r\n      {reports.filter(report => report.name.toLowerCase().includes(searchQuery.toLowerCase())).map(report => (\r\n        <div key={report.id}>\r\n          <h2>{report.name}</h2>\r\n          {Object.keys(newRating).map(field => (\r\n            <div key={field}>\r\n              <input\r\n                type=\"number\"\r\n                id={field}\r\n                value={newRating[field]}\r\n                onChange={handleInputChange}\r\n              />\r\n              <button onClick={() => handleRatingChange(report.id, field, newRating[field])}>\r\n                Submit\r\n              </button>\r\n              <button onClick={() => handleSubmitRating(report.id)}>\r\n                Save rating for report\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Rating;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}