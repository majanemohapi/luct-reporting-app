{"ast":null,"code":"import React from'react';import{Navigate}from'react-router-dom';// Corrected import statement for jwt-decode\nimport{jwtDecode}from'jwt-decode';import{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,allowedRoles}=_ref;const token=localStorage.getItem('token');if(!token)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});try{const decoded=jwtDecode(token);if(!allowedRoles.includes(decoded.role))return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});return children;}catch(err){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","jwtDecode","jsx","_jsx","ProtectedRoute","_ref","children","allowedRoles","token","localStorage","getItem","to","decoded","includes","role","err"],"sources":["C:/Users/BRAINTECH/Desktop/majane/majane/luct-report/luct-reporting-app/frontend/src/components/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\n// Corrected import statement for jwt-decode\r\nimport { jwtDecode } from 'jwt-decode';\r\n\r\nconst ProtectedRoute = ({ children, allowedRoles }) => {\r\n  const token = localStorage.getItem('token');\r\n  if (!token) return <Navigate to=\"/login\" />;\r\n  try {\r\n    const decoded = jwtDecode(token);\r\n    if (!allowedRoles.includes(decoded.role)) return <Navigate to=\"/\" />;\r\n    return children;\r\n  } catch (err) {\r\n    return <Navigate to=\"/login\" />;\r\n  }\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C;AACA,OAASC,SAAS,KAAQ,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEvC,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAgC,IAA/B,CAAEC,QAAQ,CAAEC,YAAa,CAAC,CAAAF,IAAA,CAChD,KAAM,CAAAG,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,mBAAOL,IAAA,CAACH,QAAQ,EAACW,EAAE,CAAC,QAAQ,CAAE,CAAC,CAC3C,GAAI,CACF,KAAM,CAAAC,OAAO,CAAGX,SAAS,CAACO,KAAK,CAAC,CAChC,GAAI,CAACD,YAAY,CAACM,QAAQ,CAACD,OAAO,CAACE,IAAI,CAAC,CAAE,mBAAOX,IAAA,CAACH,QAAQ,EAACW,EAAE,CAAC,GAAG,CAAE,CAAC,CACpE,MAAO,CAAAL,QAAQ,CACjB,CAAE,MAAOS,GAAG,CAAE,CACZ,mBAAOZ,IAAA,CAACH,QAAQ,EAACW,EAAE,CAAC,QAAQ,CAAE,CAAC,CACjC,CACF,CAAC,CAED,cAAe,CAAAP,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}