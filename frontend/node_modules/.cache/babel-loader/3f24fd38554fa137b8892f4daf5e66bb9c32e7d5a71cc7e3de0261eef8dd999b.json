{"ast":null,"code":"import _objectSpread from\"C:/Users/BRAINTECH/Desktop/majane/majane/luct-report/luct-reporting-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import'bootstrap/dist/css/bootstrap.min.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Lectures=()=>{const[form,setForm]=useState({course_id:'',lecturer_id:''});const[courses,setCourses]=useState([]);const[lecturers,setLecturers]=useState([]);const[searchQuery,setSearchQuery]=useState('');const token=localStorage.getItem('token');const headers={Authorization:\"Bearer \".concat(token)};useEffect(()=>{axios.get('/api/courses',{headers}).then(res=>setCourses(res.data));axios.get('/api/users?role=lecturer',{headers}).then(res=>setLecturers(res.data));},[]);const handleChange=e=>setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));const handleSubmit=async e=>{e.preventDefault();if(!form.course_id||!form.lecturer_id){alert('All fields required');return;}try{await axios.put(\"/api/courses/\".concat(form.course_id,\"/assign\"),{lecturer_id:form.lecturer_id},{headers});alert('Lecturer assigned');axios.get('/api/courses',{headers}).then(res=>setCourses(res.data));setForm({course_id:'',lecturer_id:''});}catch(err){var _err$response,_err$response$data;alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to assign lecturer');}};const handleSearch=async()=>{try{const res=await axios.get(\"/api/search/courses?query=\".concat(searchQuery),{headers});setCourses(res.data);}catch(err){alert('Search failed');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Assign Lecturer\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Course\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"course_id\",className:\"form-control\",value:form.course_id,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Course\"}),courses.map(course=>/*#__PURE__*/_jsx(\"option\",{value:course.id,children:course.name},course.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Lecturer\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"lecturer_id\",className:\"form-control\",value:form.lecturer_id,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Lecturer\"}),lecturers.map(lecturer=>/*#__PURE__*/_jsx(\"option\",{value:lecturer.id,children:lecturer.username},lecturer.id))]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary mt-3\",children:\"Assign\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-5\",children:\"Courses\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search courses...\",className:\"form-control mb-3\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,className:\"btn btn-secondary mb-3\",children:\"Search\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Code\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Semester\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Lecturer\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:courses.map(course=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:course.id}),/*#__PURE__*/_jsx(\"td\",{children:course.name}),/*#__PURE__*/_jsx(\"td\",{children:course.code}),/*#__PURE__*/_jsx(\"td\",{children:course.semester}),/*#__PURE__*/_jsx(\"td\",{children:course.lecturer_name||'Unassigned'})]},course.id))})]})]});};export default Lectures;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Lectures","form","setForm","course_id","lecturer_id","courses","setCourses","lecturers","setLecturers","searchQuery","setSearchQuery","token","localStorage","getItem","headers","Authorization","concat","get","then","res","data","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","alert","put","err","_err$response","_err$response$data","response","message","handleSearch","className","children","onSubmit","onChange","map","course","id","lecturer","username","type","placeholder","onClick","code","semester","lecturer_name"],"sources":["C:/Users/BRAINTECH/Desktop/majane/majane/luct-report/luct-reporting-app/frontend/src/components/pl/Lectures.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nconst Lectures = () => {\r\n  const [form, setForm] = useState({ course_id: '', lecturer_id: '' });\r\n  const [courses, setCourses] = useState([]);\r\n  const [lecturers, setLecturers] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const token = localStorage.getItem('token');\r\n  const headers = { Authorization: `Bearer ${token}` };\r\n\r\n  useEffect(() => {\r\n    axios.get('/api/courses', { headers }).then(res => setCourses(res.data));\r\n    axios.get('/api/users?role=lecturer', { headers }).then(res => setLecturers(res.data));\r\n  }, []);\r\n\r\n  const handleChange = (e) => setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!form.course_id || !form.lecturer_id) {\r\n      alert('All fields required');\r\n      return;\r\n    }\r\n    try {\r\n      await axios.put(`/api/courses/${form.course_id}/assign`, { lecturer_id: form.lecturer_id }, { headers });\r\n      alert('Lecturer assigned');\r\n      axios.get('/api/courses', { headers }).then(res => setCourses(res.data));\r\n      setForm({ course_id: '', lecturer_id: '' });\r\n    } catch (err) {\r\n      alert(err.response?.data?.message || 'Failed to assign lecturer');\r\n    }\r\n  };\r\n\r\n  const handleSearch = async () => {\r\n    try {\r\n      const res = await axios.get(`/api/search/courses?query=${searchQuery}`, { headers });\r\n      setCourses(res.data);\r\n    } catch (err) {\r\n      alert('Search failed');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      {/* Assign Lecturer Form */}\r\n      <h3>Assign Lecturer</h3>\r\n      <form onSubmit={handleSubmit}>\r\n        {/* Course */}\r\n        <div className=\"form-group\">\r\n          <label>Course</label>\r\n          <select name=\"course_id\" className=\"form-control\" value={form.course_id} onChange={handleChange}>\r\n            <option value=\"\">Select Course</option>\r\n            {courses.map(course => <option key={course.id} value={course.id}>{course.name}</option>)}\r\n          </select>\r\n        </div>\r\n        {/* Lecturer */}\r\n        <div className=\"form-group\">\r\n          <label>Lecturer</label>\r\n          <select name=\"lecturer_id\" className=\"form-control\" value={form.lecturer_id} onChange={handleChange}>\r\n            <option value=\"\">Select Lecturer</option>\r\n            {lecturers.map(lecturer => <option key={lecturer.id} value={lecturer.id}>{lecturer.username}</option>)}\r\n          </select>\r\n        </div>\r\n        {/* Submit */}\r\n        <button type=\"submit\" className=\"btn btn-primary mt-3\">Assign</button>\r\n      </form>\r\n\r\n      {/* List Courses */}\r\n      <h3 className=\"mt-5\">Courses</h3>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Search courses...\"\r\n        className=\"form-control mb-3\"\r\n        value={searchQuery}\r\n        onChange={(e) => setSearchQuery(e.target.value)}\r\n      />\r\n      <button onClick={handleSearch} className=\"btn btn-secondary mb-3\">Search</button>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Name</th>\r\n            <th>Code</th>\r\n            <th>Semester</th>\r\n            <th>Lecturer</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {courses.map((course) => (\r\n            <tr key={course.id}>\r\n              <td>{course.id}</td>\r\n              <td>{course.name}</td>\r\n              <td>{course.code}</td>\r\n              <td>{course.semester}</td>\r\n              <td>{course.lecturer_name || 'Unassigned'}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Lectures;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}